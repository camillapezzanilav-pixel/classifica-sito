{% extends "base.html" %}
{% block title %}Classifica Generale{% endblock %}
{% block content %}
<h2 class="mb-4">🏆 Classifica Generale</h2>

<table class="table table-striped table-bordered text-center align-middle shadow-sm">
  <thead class="table-primary">
    <tr>
      <th style="width:10%">Posizione</th>
      <th>Squadra</th>
      <th style="width:20%">Punti</th>
    </tr>
  </thead>
  <tbody>
    {% for s, punti in totali %}
    <tr {% if loop.index == 1 %}class="table-success"{% endif %}>
      <td><strong>{{ loop.index }}</strong></td>
      <td class="fw-bold">{{ s.nome }}</td>
      <td><span class="badge bg-primary fs-6">{{ punti|round(2) }}</span></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if not totali %}
<div class="alert alert-warning text-center">⚠️ Nessuna squadra inserita</div>
{% endif %}

<!-- 🔹 Nuove sezioni -->
<h2 class="mt-5">🏇 Classifiche Speciali</h2>

<ul class="list-group mb-4">
  <li class="list-group-item">
    👦 Partecipante più piccolo (Maschio): 
    {{ piu_giovane_m.nome if piu_giovane_m else "Nessun maschio" }}
    {% if piu_giovane_m %} ({{ piu_giovane_m.data_nascita }}){% endif %}
  </li>
  <li class="list-group-item">
    👧 Partecipante più piccola (Femmina): 
    {{ piu_giovane_f.nome if piu_giovane_f else "Nessuna femmina" }}
    {% if piu_giovane_f %} ({{ piu_giovane_f.data_nascita }}){% endif %}
  </li>
  <li class="list-group-item">
    🧓 Partecipante più vecchio: 
    {{ piu_vecchio.nome if piu_vecchio else "Nessuno" }}
    {% if piu_vecchio %} ({{ piu_vecchio.data_nascita }}){% endif %}
  </li>
</ul>

<h2 class="mt-5">🏠 Classifica per Maneggio</h2>
<ul class="list-group">
  {% for maneggio, numero in conteggio_maneggi.items() %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    {{ maneggio }}
    <span class="badge bg-primary rounded-pill">{{ numero }}</span>
  </li>
  {% endfor %}
</ul>

<p class="mt-3">
  <strong>Gruppo più numeroso:</strong>
  {% if maneggio_piu_numeroso %}
    {{ maneggio_piu_numeroso[0] }} ({{ maneggio_piu_numeroso[1] }} partecipanti)
  {% else %}
    Nessun maneggio registrato
  {% endif %}
</p>

{% endblock %}

