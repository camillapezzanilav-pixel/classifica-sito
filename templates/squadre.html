{% extends "base.html" %}
{% block title %}Squadre{% endblock %}
{% block content %}
<h1 class="h4 mb-3">Gestione Squadre</h1>

<!-- Form inserimento squadra -->
<form method="post" class="row g-2 mb-4">
  <div class="col-sm-8">
    <input class="form-control" name="nome" placeholder="Nome squadra" required>
  </div>
  <div class="col-sm-4 d-grid">
    <button class="btn btn-primary">âž• Aggiungi</button>
  </div>
</form>

<!-- Ricerca squadre -->
<div class="mb-3">
  <input id="searchInput" type="text" class="form-control" placeholder="ðŸ”Ž Cerca squadra...">
</div>

<!-- Lista squadre -->
<ul class="list-group" id="squadreList">
  {% for s in squadre %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <a href="{{ url_for('dettaglio_squadra', id=s.id) }}" class="text-decoration-none fw-bold">{{ s.nome }}</a>
    <form method="post" action="{{ url_for('delete_squadra', id=s.id) }}" 
          onsubmit="return confirm('Vuoi davvero eliminare la squadra {{ s.nome }} e tutti i suoi punteggi?')">
      <button class="btn btn-sm btn-danger">ðŸ—‘</button>
    </form>
  </li>
  {% else %}
  <li class="list-group-item text-muted fst-italic">Nessuna squadra presente.</li>
  {% endfor %}
</ul>

<!-- Script ricerca -->
<script>
document.getElementById("searchInput").addEventListener("keyup", function() {
  let filter = this.value.toLowerCase();
  let items = document.querySelectorAll("#squadreList li");
  items.forEach(item => {
    let text = item.textContent.toLowerCase();
    item.style.display = text.includes(filter) ? "" : "none";
  });
});
</script>
{% endblock %}

